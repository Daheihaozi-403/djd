{"version":3,"file":"js/217.5fbe06dd.js","mappings":"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","sources":["webpack://xiangyu/./src/utils/http.js","webpack://xiangyu/./src/api/api.js","webpack://xiangyu/./src/utils/helpers.js","webpack://xiangyu/./src/components/common/WordCard.vue","webpack://xiangyu/./src/components/common/WordCard.vue?f1cd","webpack://xiangyu/./src/components/StudyInfor.vue","webpack://xiangyu/./src/components/StudyInfor.vue?eee2"],"sourcesContent":["import axios from \"axios\";\r\nimport { getToken, setToken } from \"@/utils/helpers\";\r\naxios.defaults.baseURL = \"https://study-api.hanwenbo.top/\";\r\n// 错误信息处理\r\nconst errorHandle = (status, other) => {\r\n    switch (status) {\r\n        case 400:\r\n            console.log(\"信息验证失败\");\r\n            break;\r\n        case 401:\r\n            console.log(\"认证失败\");\r\n            break;\r\n        case 403:\r\n            localStorage.removeItem(\"token\");\r\n            console.log(\"token校验失败\");\r\n            break;\r\n        case 404:\r\n            console.log(\"请求资源不存在\");\r\n            break;\r\n        default:\r\n            console.log(other);\r\n            break;\r\n    }\r\n};\r\n// 添加请求拦截器\r\naxios.interceptors.request.use(\r\n    function(config) {\r\n        config.headers = {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n        };\r\n        const token = getToken();\r\n        if (token) {\r\n            config.headers.Authorization = token;\r\n        }\r\n\r\n        // console.log(config);\r\n        return config;\r\n    },\r\n    function(error) {\r\n        // 对请求错误做些什么\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 添加响应拦截器\r\naxios.interceptors.response.use(\r\n    function(response) {\r\n        // 对响应数据做点什么\r\n        if (response.headers.authorization) {\r\n            setToken(response.headers.authorization);\r\n        }\r\n\r\n        // response.headers['Authorization'] = response.data.token;\r\n        return response.status === 200 ?\r\n            Promise.resolve(response.data) :\r\n            Promise.reject(response);\r\n    },\r\n    function(error) {\r\n        // 对响应错误做点什么\r\n        const { response } = error;\r\n        if (response) {\r\n            errorHandle(response.status, response.data.message);\r\n            return Promise.reject(response.data);\r\n        } else {\r\n            console.log(\"断了\");\r\n        }\r\n    }\r\n);\r\nexport default axios;","import axios from \"@/utils/http\";\r\n\r\nexport function login() {\r\n    return axios.get(\"/user/wechat/login-test\");\r\n}\r\nexport function statistics() {\r\n    return axios.get(\"/study/statistics\");\r\n}\r\nexport function money() {\r\n    return axios.get(\"/deal/statistics\");\r\n}\r\nexport function recommend() {\r\n    return axios.get(\"/study/books/recommend\");\r\n}\r\nexport function infor(id) {\r\n    return axios.get(`/study/books/${id}`); //获取学习集详情\r\n}\r\nexport function delBooks(id) {\r\n    return axios.delete(`/study/books/${id}`);\r\n}\r\nexport function price(params) {\r\n    return axios.get(\"/deal/money\", {\r\n        params,\r\n    });\r\n}\r\nexport function users(id) {\r\n    return axios.get(\"/study/books/\" + id + \"/users\");\r\n}\r\nexport function cards(id, params) {\r\n    return axios.get(\"/study/books/\" + id + \"/entries\", {\r\n        params,\r\n    }); //获取学习集的卡片\r\n}\r\nexport function create(data) {\r\n    return axios.post(\"/study/books\", data);\r\n}\r\nexport function myBooks() {\r\n    return axios.get(\"/study/books\");\r\n}\r\nexport function collect(id, data) {\r\n    return axios.post(\"/study/books/\" + id + \"/collect\", data);\r\n}\r\nexport function collectCard(id, data) {\r\n    return axios.post(\"/study/entries/\" + id + \"/collect\", data);\r\n}\r\nexport function cardInfor(id) {\r\n    return axios.get(`/study/entries/${id}`); //获取卡片详情\r\n}\r\nexport function cardChange(id, data) {\r\n    return axios.put(`/study/entries/${id}`, data); //修改卡片\r\n}\r\nexport function delCard(id) {\r\n    return axios.delete(`/study/entries/${id}`);\r\n    //删除卡片;\r\n}\r\nexport function recent() {\r\n    return axios.get(`/study/books/recent`);\r\n} //获取最近学习的学习集\r\nexport function createCard(data) {\r\n    return axios.post(\"/study/entries\", data);\r\n}\r\nexport function myCreate() {\r\n    return axios.get(\"/study/books/create\");\r\n}","import VueCookies from \"vue-cookies\";\r\n\r\nexport const setUser = (user) => {\r\n    VueCookies.set(\"user\", user, 60 * 60 * 60);\r\n};\r\n\r\nexport const getUser = () => {\r\n    return VueCookies.get(\"user\");\r\n};\r\n\r\nexport const setToken = (token) => {\r\n    VueCookies.set(\"token\", token, 60 * 60 * 60);\r\n};\r\n\r\nexport const getToken = () => {\r\n    return VueCookies.get(\"token\");\r\n};\r\n\r\nexport const setId = (id) => {\r\n    VueCookies.set(\"id\", id, 60 * 60 * 60);\r\n};\r\n\r\nexport const getId = () => {\r\n    return VueCookies.get(\"id\");\r\n};","<template>\r\n  <div class=\"flex box1 justify-between mb-3\">\r\n    <div :class=\"state.isFree ? 'hover' : 'box2'\" @click=\"changeIsFree1\">\r\n      全部卡片（{{ cardsNum.entry_num }}）\r\n    </div>\r\n    <div :class=\"state.isFree ? 'box2' : 'hover'\" @click=\"changeIsFree1\">\r\n      重点卡片（{{ cardsNum.collect_entry_num }}）\r\n    </div>\r\n  </div>\r\n\r\n  <ul v-if=\"state.isFree\">\r\n    <li\r\n      class=\"mb-4\"\r\n      v-for=\"(item, index) in cardsInfo.items\"\r\n      :key=\"index\"\r\n      :value=\"item.value\"\r\n    >\r\n      <van-swipe-cell>\r\n        <span class=\"text-xs\"> {{ item.sort }}</span>\r\n        <van-cell :border=\"false\" class=\"word-card\">\r\n          <div class=\"flex justify-between\">\r\n            <div class=\"front-text\">\r\n              <span class=\"text-xl font-semibold\">{{ item.front }}</span>\r\n            </div>\r\n            <div class=\"flex\">\r\n              <img\r\n                :src=\"\r\n                  item.is_collect\r\n                    ? require('@/assets/collectIcon.png')\r\n                    : require(`@/assets/wordcard1.png`)\r\n                \"\r\n                @click=\"cardCollect(item.id, index, 0)\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"word-translate\">\r\n            {{ item.back }}\r\n          </div>\r\n        </van-cell>\r\n        <template #right>\r\n          <div class=\"ml-6 mt-10\" v-if=\"state.user.id === item.user_id\">\r\n            <router-link\r\n              :to=\"{\r\n                path: '/change',\r\n                query: {\r\n                  id: item.id,\r\n                },\r\n              }\"\r\n            >\r\n              <van-button square type=\"danger\" class=\"word-button button-mr\">\r\n                <img src=\"@/assets/WordButton1.png\" alt=\"\" />\r\n              </van-button>\r\n            </router-link>\r\n            <van-button\r\n              square\r\n              type=\"primary\"\r\n              class=\"word-button test1\"\r\n              @click=\"cardDel(item.id)\"\r\n            >\r\n              <img src=\"@/assets/WordButton2.png\" alt=\"\" />\r\n            </van-button>\r\n          </div>\r\n        </template>\r\n      </van-swipe-cell>\r\n    </li>\r\n  </ul>\r\n  <ul v-else>\r\n    <li\r\n      class=\"mb-4\"\r\n      v-for=\"(item, index) in cardCol.items\"\r\n      :key=\"index\"\r\n      :value=\"item.value\"\r\n    >\r\n      <van-swipe-cell>\r\n        <span class=\"text-xs\"> {{ item.sort }}</span>\r\n        <van-cell :border=\"false\" class=\"word-card\">\r\n          <div class=\"flex justify-between\">\r\n            <div>\r\n              <span class=\"text-xl font-semibold\">{{ item.front }}</span>\r\n            </div>\r\n            <div class=\"flex\">\r\n              <img\r\n                class=\"mr-4\"\r\n                :src=\"\r\n                  item.is_collect\r\n                    ? require('@/assets/collectIcon.png')\r\n                    : require(`@/assets/wordcard1.png`)\r\n                \"\r\n                @click=\"cardCollect(item.id, index, 1)\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"word-translate\">\r\n            {{ item.back }}\r\n          </div>\r\n        </van-cell>\r\n        <template #right v-if=\"state.user.id === item.user_id\">\r\n          <div class=\"ml-6 mt-10\">\r\n            <router-link\r\n              :to=\"{\r\n                path: '/change',\r\n                query: {\r\n                  id: item.id,\r\n                },\r\n              }\"\r\n            >\r\n              <van-button square type=\"danger\" class=\"word-button button-mr\">\r\n                <img src=\"@/assets/WordButton1.png\" alt=\"\" />\r\n              </van-button>\r\n            </router-link>\r\n            <van-button square type=\"primary\" class=\"word-button test\">\r\n              <img\r\n                src=\"@/assets/WordButton2.png\"\r\n                alt=\"\"\r\n                @click=\"cardDel(item.id)\"\r\n              />\r\n            </van-button>\r\n          </div>\r\n        </template>\r\n      </van-swipe-cell>\r\n    </li>\r\n  </ul>\r\n</template>\r\n<script setup>\r\nimport { reactive } from \"vue\";\r\nimport { ref } from \"vue\";\r\nimport { defineProps } from \"vue\";\r\nimport { infor, cards, collectCard, delCard } from \"@/api/api\";\r\nimport { getUser } from \"@/utils/helpers\";\r\nimport { Notify } from \"vant\";\r\nconst bookId = defineProps([\"value\"]);\r\nconst cardsInfo = ref(\"\");\r\nconst cardsNum = ref(\"\");\r\nconst cardCol = ref(\"\");\r\n\r\nvar state = reactive({\r\n  isFree: true,\r\n  user: getUser(),\r\n});\r\n\r\nconst getInfo = async () => {\r\n  try {\r\n    const resp = await cards(bookId.value, {\r\n      page: 1,\r\n      limit: 5,\r\n    });\r\n    cardsInfo.value = resp.data;\r\n\r\n    const colCard = await cards(bookId.value, {\r\n      type: \"collect\",\r\n    });\r\n    cardCol.value = colCard.data;\r\n\r\n    const inforResp = await infor(bookId.value);\r\n    cardsNum.value = inforResp.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst changeIsFree1 = () => {\r\n  state.isFree = !state.isFree;\r\n};\r\nconst cardCollect = async (id, i, type) => {\r\n  try {\r\n    await collectCard(id);\r\n    isCol(i, type);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\nconst isCol = async (i, type) => {\r\n  if (type == 0) {\r\n    cardsInfo.value.items[i].is_collect = !cardsInfo.value.items[i].is_collect;\r\n    if (cardsInfo.value.items[i].is_collect) {\r\n      cardsNum.value.collect_entry_num = cardsNum.value.collect_entry_num + 1;\r\n      cardCol.value.items.push(cardsInfo.value.items[i]);\r\n      Notify({\r\n        message: \" 收藏成功\",\r\n        color: \"#FFFFFF\",\r\n        background: \"#12BFA2\",\r\n      });\r\n    } else {\r\n      for (let index = 0; index < cardsNum.value.collect_entry_num; index++) {\r\n        if (cardCol.value.items[index] == cardsInfo.value.items[i]) {\r\n          cardCol.value.items.splice(index, 1);\r\n        }\r\n      }\r\n      cardsNum.value.collect_entry_num = cardsNum.value.collect_entry_num - 1;\r\n      console.log(cardCol.value.items);\r\n      Notify(\"取消收藏\");\r\n    }\r\n  } else {\r\n    cardCol.value.items[i].is_collect = !cardCol.value.items[i].is_collect;\r\n\r\n    if (!cardCol.value.items[i].is_collect) {\r\n      for (let index = 0; index < cardsNum.value.collect_entry_num; index++) {\r\n        if (cardCol.value.items[index] == cardCol.value.items[i]) {\r\n          cardCol.value.items.splice(index, 1);\r\n        }\r\n      }\r\n      cardsNum.value.collect_entry_num = cardsNum.value.collect_entry_num - 1;\r\n      Notify(\"取消收藏\");\r\n    }\r\n  }\r\n};\r\nconst cardDel = async (id) => {\r\n  try {\r\n    await delCard(id);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\ngetInfo();\r\n</script>\r\n<style scoped>\r\n.box1 {\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n  padding: 0.25rem;\r\n}\r\n.box2 {\r\n  /* background: #ffffff; */\r\n  border-radius: 1rem;\r\n  text-align: center;\r\n  padding: 0.6875rem 0;\r\n  flex: 1;\r\n  color: #000000;\r\n}\r\n.hover {\r\n  background: #12bfa2;\r\n  border-radius: 1rem;\r\n  text-align: center;\r\n  padding: 0.6875rem 0;\r\n  flex: 1;\r\n  color: #ffffff;\r\n}\r\n.word-card {\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n}\r\n.word-translate {\r\n  background: #f5f6fa;\r\n  border-radius: 0.375rem;\r\n  padding-left: 1rem;\r\n  margin-top: 0.5rem;\r\n}\r\n.word-button {\r\n  width: 3rem;\r\n  height: 3rem;\r\n  padding: 0;\r\n\r\n  background-color: transparent;\r\n  border: 0;\r\n}\r\n.button-mr {\r\n  margin-right: 1rem;\r\n}\r\n.front-text {\r\n  width: 17.5rem;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n","import script from \"./WordCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WordCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WordCard.vue?vue&type=style&index=0&id=bd18cb56&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\code\\\\xiangyu\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bd18cb56\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"mx-4 mt-4\">\r\n    <div class=\"text-normal font-semibold text-center mb-7\">学习集详情</div>\r\n\r\n    <img :src=\"booksInfo.cover\" alt=\"\" class=\"mb-4 rounded-2xl\" />\r\n    <div class=\"infor-box mb-4\">\r\n      <div class=\"flex justify-between infor-box-title\">\r\n        <span> {{ booksInfo.name }}</span>\r\n        <div class=\"flex\">\r\n          <div v-if=\"state.idUser == state.idMy\">\r\n            <van-popover\r\n              v-model:show=\"showPopover\"\r\n              :actions=\"actions\"\r\n              class=\"css-display\"\r\n              placement=\"bottom-end\"\r\n              @select=\"deleteBook\"\r\n            >\r\n              <template #reference>\r\n                <van-button type=\"primary\" class=\"bg-display\">\r\n                  <img\r\n                    src=\"@/assets/studyinforIcon1.png\"\r\n                    alt=\"\"\r\n                    class=\"icon-study\"\r\n                /></van-button>\r\n              </template>\r\n            </van-popover>\r\n          </div>\r\n          <img\r\n            :src=\"\r\n              state.isCollect\r\n                ? require('../assets/collect.png')\r\n                : require('../assets/studyinforIcon3.png')\r\n            \"\r\n            alt=\"\"\r\n            class=\"icon-study ml-2\"\r\n            @click=\"collectBook\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"infor-box-body pt-2\"\r\n        v-if=\"booksInfo.describe || booksInfo.recommend || state.bookTage\"\r\n      >\r\n        <p class=\"body-title mb-2\" v-if=\"booksInfo.recommend\">\r\n          {{ booksInfo.recommend }}\r\n        </p>\r\n        <p class=\"body-p leading-5\" v-if=\"booksInfo.describe\">\r\n          {{ booksInfo.describe }}\r\n        </p>\r\n        <div class=\"flex mt-4\" v-if=\"state.isFree\">\r\n          <tag\r\n            class=\"body-p leading-4 mr-2 infor-tag mb-4\"\r\n            v-for=\"(item, index) in state.bookTage\"\r\n            :key=\"index\"\r\n            :value=\"item.value\"\r\n            >{{ item }}</tag\r\n          >\r\n        </div>\r\n      </div>\r\n      <div class=\"flex justify-between user-box\">\r\n        <div class=\"flex\">\r\n          <img\r\n            class=\"mr-4 user-photo rounded-full\"\r\n            :src=\"booksInfo.user?.avatar\"\r\n          />\r\n          <div class=\"maintainCarCon\">\r\n            <div class=\"text-xs leading-4 mb-1\">\r\n              {{ booksInfo.user?.name }}\r\n            </div>\r\n            <div class=\"text-xs leading-4 color-gray\">\r\n              加入学习 {{ booksInfo.user?.created_at_zh }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"text-xs leading-4 color-gray\">\r\n          创建于 {{ booksInfo.created_at_zh }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"join-user mb-6\" v-if=\"state.usersTrue\">\r\n      <div class=\"flex justify-between mb-4\">\r\n        <span class=\"text-sm font-semibold\">加入的用户</span>\r\n        <router-link\r\n          :to=\"{\r\n            path: '/join',\r\n            query: {\r\n              id: route.query.id,\r\n            },\r\n          }\"\r\n          class=\"text-sm font-medium\"\r\n          >查看所有</router-link\r\n        >\r\n      </div>\r\n      <ul class=\"flex justify-between\">\r\n        <li\r\n          v-for=\"(item, index) in state.usersNum\"\r\n          :key=\"index\"\r\n          class=\"new-user\"\r\n        >\r\n          <img :src=\"item.avatar\" class=\"rounded-full\" />\r\n          <div class=\"text-xs leading-5 text-center user-name\">\r\n            {{ item.name }}\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <word-card :value=\"route.query.id\" />\r\n    <div class=\"my-8\">\r\n      <router-link\r\n        :to=\"{\r\n          path: '/card',\r\n          query: {\r\n            id: route.query.id,\r\n          },\r\n        }\"\r\n      >\r\n        <div class=\"text-center font-medium mb-8 color-green\">\r\n          查看全部卡片\r\n        </div></router-link\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport WordCard from \"./common/WordCard\";\r\nimport { ref } from \"vue\";\r\nimport { reactive } from \"vue\";\r\nimport { infor, users, delBooks, collect } from \"@/api/api\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { Notify } from \"vant\";\r\nimport { getUser } from \"@/utils/helpers\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst booksInfo = ref({});\r\nconst newUsers = ref({});\r\n\r\nvar state = reactive({\r\n  isFree: true,\r\n  usersTrue: true,\r\n  bookTage: \"\",\r\n  usersNum: [],\r\n  isCollect: false,\r\n  idUser: \"\",\r\n  idMy: \"\",\r\n});\r\nconst myId = async () => {\r\n  try {\r\n    const resp = await getUser();\r\n    state.idMy = resp.id;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst getInfo = async () => {\r\n  try {\r\n    const resp = await infor(route.query.id);\r\n    const user = await users(route.query.id);\r\n    booksInfo.value = resp.data;\r\n    newUsers.value = user.data;\r\n    state.isCollect = booksInfo.value.is_collect;\r\n    state.idUser = booksInfo.value.user_id;\r\n    tagNone();\r\n    userNone();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\nconst tagNone = () => {\r\n  if (booksInfo.value.tags) {\r\n    state.bookTage = booksInfo.value.tags.split(\",\");\r\n  } else {\r\n    state.isFree = !state.isFree;\r\n  }\r\n};\r\n\r\nconst userNone = () => {\r\n  if (newUsers.value.items) {\r\n    state.usersNum = newUsers.value.items.slice(0, 5);\r\n  } else {\r\n    state.usersTrue = !state.usersTrue;\r\n  }\r\n};\r\n\r\nconst showPopover = ref(false);\r\nconst actions = [\r\n  { text: \"编辑\", icon: \"delete\", num: 0 },\r\n  { text: \"删除\", icon: \"delete\", num: 1 },\r\n];\r\n\r\nconst deleteBook = async () => {\r\n  if (!actions.num) {\r\n    router.push({ path: \"/change/book\", query: { id: route.query.id } });\r\n  } else {\r\n    try {\r\n      await delBooks(route.query.id);\r\n      Notify({\r\n        message: \" 删除成功\",\r\n        color: \"#FFFFFF\",\r\n        background: \"#12BFA2\",\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n};\r\nconst collectBook = async () => {\r\n  try {\r\n    state.isCollect = !state.isCollect;\r\n    await collect(route.query.id);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\ngetInfo();\r\nmyId();\r\n</script>\r\n<style scoped>\r\n.infor-box {\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n  padding: 1.25rem 1rem;\r\n}\r\n.infor-box-title {\r\n  font-weight: 700;\r\n  font-size: 18px;\r\n  line-height: 135%;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 0.0625rem solid #edeff5;\r\n}\r\n.infor-box-body {\r\n  border-bottom: 0.0625rem solid #edeff5;\r\n}\r\n.body-title {\r\n  font-size: 1rem;\r\n  line-height: 1.375rem;\r\n}\r\n.body-p {\r\n  font-size: 0.75rem;\r\n\r\n  color: #8c8c8c;\r\n}\r\n.icon-study {\r\n  width: 1.625rem;\r\n  height: 1.625rem;\r\n}\r\n.infor-tag {\r\n  background: #f4f8f5;\r\n  border-radius: 0.375rem;\r\n  padding: 0.25rem 0.5rem;\r\n}\r\n.user-box {\r\n  padding-top: 1rem;\r\n}\r\n.new-user {\r\n  height: 4.25rem;\r\n  width: 3rem;\r\n}\r\n.user-photo {\r\n  width: 2.5rem;\r\n  height: 2.5rem;\r\n}\r\n.color-gray {\r\n  color: #8c8c8c;\r\n}\r\n.join-user {\r\n  padding: 1rem;\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n}\r\n.color-green {\r\n  color: #12bfa2;\r\n}\r\n.color-yellow {\r\n  color: #ffb800;\r\n}\r\n.button-bottom {\r\n  border-radius: 6.25rem;\r\n  padding: 0.6875rem;\r\n}\r\n.button-img {\r\n  width: 1rem;\r\n  height: 0.625rem;\r\n  margin: auto 0.75rem;\r\n}\r\n.bg-yellow {\r\n  background: #f3eec4;\r\n}\r\n.bg-green {\r\n  background: #12bfa2;\r\n}\r\n.bg-display {\r\n  background-color: transparent;\r\n  border: 0;\r\n  padding: 0;\r\n  height: 1.625rem;\r\n  width: 1.625rem;\r\n  border-radius: 50%;\r\n  position: relative;\r\n  top: -0.25rem;\r\n}\r\n.css-display {\r\n  height: 1.625rem;\r\n  padding: 0;\r\n  position: absolute;\r\n}\r\n.user-name {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n<style>\r\n.van-popover__content {\r\n  width: 16rem;\r\n}\r\n.van-popover__action {\r\n  width: 100%;\r\n}\r\n.van-popover__wrapper {\r\n  width: 2rem;\r\n}\r\n.van-button__content {\r\n  width: 2.25rem;\r\n}\r\n</style>\r\n","import script from \"./StudyInfor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StudyInfor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./StudyInfor.vue?vue&type=style&index=0&id=4158a5c2&scoped=true&lang=css\"\nimport \"./StudyInfor.vue?vue&type=style&index=1&id=4158a5c2&lang=css\"\n\nimport exportComponent from \"E:\\\\code\\\\xiangyu\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4158a5c2\"]])\n\nexport default __exports__"],"names":["axios","errorHandle","status","other","console","log","localStorage","removeItem","config","headers","Accept","token","getToken","Authorization","error","Promise","reject","response","authorization","setToken","resolve","data","message","login","statistics","money","recommend","infor","id","delBooks","price","params","users","cards","create","myBooks","collect","collectCard","cardInfor","cardChange","delCard","recent","createCard","myCreate","setUser","user","VueCookies","getUser","cardsInfo","ref","cardsNum","cardCol","state","reactive","isFree","getInfo","async","resp","bookId","value","page","limit","colCard","type","inforResp","err","changeIsFree1","cardCollect","i","isCol","items","is_collect","collect_entry_num","push","Notify","color","background","index","splice","cardDel","__exports__","router","useRouter","route","useRoute","booksInfo","newUsers","usersTrue","bookTage","usersNum","isCollect","idUser","idMy","myId","query","user_id","tagNone","userNone","tags","split","slice","showPopover","actions","text","icon","num","deleteBook","path","collectBook"],"sourceRoot":""}