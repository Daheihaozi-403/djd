"use strict";(self["webpackChunkxiangyu"]=self["webpackChunkxiangyu"]||[]).push([[513],{5278:function(t,e,o){o.d(e,{hg:function(){return j},D8:function(){return A},_u:function(){return f},KM:function(){return v},jm:function(){return h},Ue:function(){return k},LH:function(){return _},lM:function(){return m},$B:function(){return w},mz:function(){return p},x4:function(){return i},CZ:function(){return l},z6:function(){return y},Aj:function(){return S},nt:function(){return g},h5:function(){return U},l8:function(){return d},hd:function(){return u},rC:function(){return b}});var n=o(6265),s=o.n(n),r=o(6163);s().defaults.baseURL="https://study-api.hanwenbo.top/";const a=(t,e)=>{switch(t){case 400:console.log("信息验证失败");break;case 401:console.log("认证失败");break;case 403:localStorage.removeItem("token"),console.log("token校验失败");break;case 404:console.log("请求资源不存在");break;default:console.log(e);break}};s().interceptors.request.use((function(t){t.headers={"Content-Type":"application/json",Accept:"application/json"};const e=(0,r.LP)();return e&&(t.headers.Authorization=e),t}),(function(t){return Promise.reject(t)})),s().interceptors.response.use((function(t){return t.headers.authorization&&(0,r.o4)(t.headers.authorization),200===t.status?Promise.resolve(t.data):Promise.reject(t)}),(function(t){const{response:e}=t;if(e)return a(e.status,e.data.message),Promise.reject(e.data);console.log("断了")}));var c=s();function i(){return c.get("/user/wechat/login-test")}function u(){return c.get("/study/statistics")}function l(){return c.get("/deal/statistics")}function d(){return c.get("/study/books/recommend")}function p(t){return c.get(`/study/books/${t}`)}function m(t){return c["delete"](`/study/books/${t}`)}function g(t){return c.get("/deal/money",{params:t})}function b(t){return c.get("/study/books/"+t+"/users")}function f(t,e){return c.get("/study/books/"+t+"/entries",{params:e})}function k(t){return c.post("/study/books",t)}function y(){return c.get("/study/books")}function v(t,e){return c.post("/study/books/"+t+"/collect",e)}function h(t,e){return c.post("/study/entries/"+t+"/collect",e)}function A(t){return c.get(`/study/entries/${t}`)}function j(t,e){return c.put(`/study/entries/${t}`,e)}function w(t){return c["delete"](`/study/entries/${t}`)}function U(){return c.get("/study/books/recent")}function _(t){return c.post("/study/entries",t)}function S(){return c.get("/study/books/create")}},6163:function(t,e,o){o.d(e,{LP:function(){return i},PR:function(){return a},av:function(){return r},o4:function(){return c}});var n=o(5269),s=o.n(n);const r=t=>{s().set("user",t,216e3)},a=()=>s().get("user"),c=t=>{s().set("token",t,216e3)},i=()=>s().get("token")},7513:function(t,e,o){o.r(e),o.d(e,{default:function(){return I}});var n=o(3396),s=o(4870),r=o(9242),a=o(7139),c=o(1988),i=o(5278),u=o(2135),l=o(2483);const d=t=>((0,n.dD)("data-v-71046a3b"),t=t(),(0,n.Cn)(),t),p=d((()=>(0,n._)("div",{class:"text-normal font-semibold text-center mt-4 mb-7"},"创建学习集1",-1))),m={class:"mx-6"},g=d((()=>(0,n._)("div",{class:"font-title mb-4"},"学习集名称",-1))),b={class:"mb-4"},f=d((()=>(0,n._)("div",{class:"font-title mb-4"},"推荐语",-1))),k={class:"mb-4"},y=d((()=>(0,n._)("div",{class:"font-title mb-4"},"详细说明",-1))),v={class:"mb-6"},h=d((()=>(0,n._)("div",{class:"font-title mb-4"},"学习集图片",-1))),A={class:"mb-6 flex",style:{overflow:"auto",width:"100%"}},j=["v-model","onClick"],w=["src"],U=d((()=>(0,n._)("div",{class:"font-title mb-4"},"标签",-1))),_={class:"mb-6",style:{overflow:"auto",width:"100%",display:"flex"}},S=["onUpdate:modelValue","readonly","onKeyup","onClick"],C=d((()=>(0,n._)("div",{class:"font-title mb-4"},"属性",-1))),x={class:"flex mb-8 flex-1 attributes"};var q={__name:"ChangeBook",setup(t){const e=(0,l.yj)();console.log(e.query.id);var o=(0,s.qj)({isFree:!0,clickPhoto:66,booksInfo:"",book:{name:"",recommend:"",describe:"",price:"",cover:"",tags:[]},photo:["https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/1.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/2.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/3.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/4.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/5.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/6.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/7.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/8.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/9.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/10.jpeg"]});const d=async()=>{try{const t=await(0,i.mz)(e.query.id);o.booksInfo=t.data,o.book.name=t.data.name,o.book.recommend=t.data.recommend,o.book.describe=t.data.describe,o.book.price=t.data.price,o.book.cover=t.data.cover,o.book.tags=t.data.tags}catch(t){console.log(t)}},q=()=>{o.isFree=!o.isFree},P=t=>{o.clickPhoto=t,o.book.cover=o.photo[t]},B=()=>{o.book.tags.push({value:"",readOnly:!1})},I=t=>{o.book.tags[t].readOnly=!0},O=t=>{o.book.tags.splice(t,1)},V=async()=>{try{if(o.book.name)if(o.book.cover){let t=JSON.parse(JSON.stringify(o.book));t.tags=t.tags.join(","),t.price=parseFloat(t.price),console.log(o.book),await(0,i.Ue)(t),window.location.replace("#/sudy?id=")}else(0,u.g)("请选择学习集图片");else(0,u.g)("请输入学习集名称")}catch(t){console.log(t)}};return d(),(t,e)=>{const i=(0,n.up)("van-icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[p,(0,n._)("div",m,[g,(0,n._)("div",b,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"8个字以内",class:"input-style",maxlength:"8","onUpdate:modelValue":e[0]||(e[0]=t=>(0,s.SU)(o).book.name=t)},null,512),[[r.nr,(0,s.SU)(o).book.name]])]),f,(0,n._)("div",k,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"一句话推荐，15字以内",class:"input-style",maxlength:"15","onUpdate:modelValue":e[1]||(e[1]=t=>(0,s.SU)(o).book.recommend=t)},null,512),[[r.nr,(0,s.SU)(o).book.recommend]])]),y,(0,n._)("div",v,[(0,n.wy)((0,n._)("textarea",{class:"input-style1","onUpdate:modelValue":e[2]||(e[2]=t=>(0,s.SU)(o).book.describe=t)},null,512),[[r.nr,(0,s.SU)(o).book.describe]])]),h,(0,n._)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(o).photo,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{"v-model":(0,s.SU)(o).photo[e],key:e,onClick:t=>P(e),class:"set-photo mr-4 relative"},[(0,n._)("img",{src:t,class:"object-none object-left-bottom book-photo"},null,8,w),(0,n._)("img",{src:c,alt:"",class:(0,a.C_)((0,s.SU)(o).clickPhoto==e?"icon-setphoto":"hidden")},null,2)],8,j)))),128))]),U,(0,n._)("div",_,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(o).book.tags,((t,e)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{style:{"min-width":"5rem",width:"5rem"},type:"text","onUpdate:modelValue":t=>(0,s.SU)(o).book.tags[e].value=t,key:e,readonly:t.readOnly,class:"input-tage mb-2",onKeyup:(0,r.D2)((t=>I(e)),["enter"]),onClick:(0,r.iM)((t=>O(e)),["ctrl","left"])},null,40,S)),[[r.nr,(0,s.SU)(o).book.tags[e].value]]))),128)),(0,n._)("div",{class:"add-tag",onClick:B},[(0,n.Wm)(i,{name:"plus",size:"0.62rem"})])]),C,(0,n._)("div",x,[(0,n._)("div",{class:(0,a.C_)("button-style "+((0,s.SU)(o).isFree?"hover":"")),onClick:q}," 免费 ",2),(0,n._)("div",{class:(0,a.C_)("button-style "+((0,s.SU)(o).isFree?"":"hover")),onClick:q}," 付费 ",2),(0,s.SU)(o).isFree?(0,n.kq)("",!0):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:0,type:"number",placeholder:"0.00",class:"input-style2 flex-grow","onUpdate:modelValue":e[3]||(e[3]=t=>(0,s.SU)(o).book.price=t)},null,512)),[[r.nr,(0,s.SU)(o).book.price]])]),(0,n._)("div",{class:"px-4"},[(0,n._)("div",{class:"button2 mb-10",onClick:V},"保存并创建学习集")])])],64)}}},P=o(89);const B=(0,P.Z)(q,[["__scopeId","data-v-71046a3b"]]);var I=B},1988:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEwSURBVHgBnZNNTsJQEMdnhiYu3HABk7rX2IUHoOwNhBt4A29gvYE9ATcwujah7t2Q6N4mXIANiSbyhpnpBw8IpfBLXjqdvv989M1D2KL7Pu5R0BmIOZQVFl6cAvDUwfJpHt/n/n6shdm4S9B5FPMBmnkuA83rAIU4yCRLBK1AqeY/1iCkr0XmtmKFo7JaQMkeyssPnIC0ElMVqYmLs3P4vL2z5UOOhtICRofEL9d9e+5AOAi2e6+yjL4n8glq8exvUfg2CYO9Wa/6tV2JZ7+L3SJk5b5j9DUxgQoPiVmGi8Dxm+80QRmkSaygzIMeY09OIoMTkGO8JJmmD6kihaPhVO+FTaIjl2g/raV2sVyitgXQmWZwcbtKONW9G5fJx0abKWGkG1zPSK4/Wyp9tZY9Vs3QlL+tSYPaAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=513.09e14e13.js.map