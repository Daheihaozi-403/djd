{"version":3,"file":"js/654.f7dc8b4d.js","mappings":"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","sources":["webpack://xiangyu/./src/utils/http.js","webpack://xiangyu/./src/api/api.js","webpack://xiangyu/./src/utils/helpers.js","webpack://xiangyu/./src/components/common/SetInfor.vue","webpack://xiangyu/./src/components/common/SetInfor.vue?11e1","webpack://xiangyu/./src/components/CreateInfor.vue"],"sourcesContent":["import axios from \"axios\";\r\nimport { getToken, setToken } from \"@/utils/helpers\";\r\naxios.defaults.baseURL = \"https://study-api.hanwenbo.top/\";\r\n// 错误信息处理\r\nconst errorHandle = (status, other) => {\r\n    switch (status) {\r\n        case 400:\r\n            console.log(\"信息验证失败\");\r\n            break;\r\n        case 401:\r\n            console.log(\"认证失败\");\r\n            break;\r\n        case 403:\r\n            localStorage.removeItem(\"token\");\r\n            console.log(\"token校验失败\");\r\n            break;\r\n        case 404:\r\n            console.log(\"请求资源不存在\");\r\n            break;\r\n        default:\r\n            console.log(other);\r\n            break;\r\n    }\r\n};\r\n// 添加请求拦截器\r\naxios.interceptors.request.use(\r\n    function(config) {\r\n        config.headers = {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n        };\r\n        const token = getToken();\r\n        if (token) {\r\n            config.headers.Authorization = token;\r\n        }\r\n\r\n        // console.log(config);\r\n        return config;\r\n    },\r\n    function(error) {\r\n        // 对请求错误做些什么\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 添加响应拦截器\r\naxios.interceptors.response.use(\r\n    function(response) {\r\n        // 对响应数据做点什么\r\n        if (response.headers.authorization) {\r\n            setToken(response.headers.authorization);\r\n        }\r\n\r\n        // response.headers['Authorization'] = response.data.token;\r\n        return response.status === 200 ?\r\n            Promise.resolve(response.data) :\r\n            Promise.reject(response);\r\n    },\r\n    function(error) {\r\n        // 对响应错误做点什么\r\n        const { response } = error;\r\n        if (response) {\r\n            errorHandle(response.status, response.data.message);\r\n            return Promise.reject(response.data);\r\n        } else {\r\n            console.log(\"断了\");\r\n        }\r\n    }\r\n);\r\nexport default axios;","import axios from \"@/utils/http\";\r\n\r\nexport function login() {\r\n    return axios.get(\"/user/wechat/login-test\");\r\n}\r\nexport function statistics() {\r\n    return axios.get(\"/study/statistics\");\r\n}\r\nexport function money() {\r\n    return axios.get(\"/deal/statistics\");\r\n}\r\nexport function recommend() {\r\n    return axios.get(\"/study/books/recommend\");\r\n}\r\nexport function infor(id) {\r\n    return axios.get(`/study/books/${id}`); //获取学习集详情\r\n}\r\nexport function delBooks(id) {\r\n    return axios.delete(`/study/books/${id}`);\r\n}\r\nexport function price(params) {\r\n    return axios.get(\"/deal/money\", {\r\n        params,\r\n    });\r\n}\r\nexport function users(id) {\r\n    return axios.get(\"/study/books/\" + id + \"/users\");\r\n}\r\nexport function cards(id, params) {\r\n    return axios.get(\"/study/books/\" + id + \"/entries\", {\r\n        params,\r\n    }); //获取学习集的卡片\r\n}\r\nexport function create(data) {\r\n    return axios.post(\"/study/books\", data);\r\n}\r\nexport function myBooks() {\r\n    return axios.get(\"/study/books\");\r\n}\r\nexport function collect(id, data) {\r\n    return axios.post(\"/study/books/\" + id + \"/collect\", data);\r\n}\r\nexport function collectCard(id, data) {\r\n    return axios.post(\"/study/entries/\" + id + \"/collect\", data);\r\n}\r\nexport function cardInfor(id) {\r\n    return axios.get(`/study/entries/${id}`); //获取卡片详情\r\n}\r\nexport function cardChange(id, data) {\r\n    return axios.put(`/study/entries/${id}`, data); //修改卡片\r\n}\r\nexport function delCard(id) {\r\n    return axios.delete(`/study/entries/${id}`);\r\n    //删除卡片;\r\n}\r\nexport function recent() {\r\n    return axios.get(`/study/books/recent`);\r\n} //获取最近学习的学习集\r\nexport function createCard(data) {\r\n    return axios.post(\"/study/entries\", data);\r\n}\r\nexport function myCreate() {\r\n    return axios.get(\"/study/books/create\");\r\n}","import VueCookies from \"vue-cookies\";\r\n\r\nexport const setUser = (user) => {\r\n    VueCookies.set(\"user\", user, 60 * 60 * 60);\r\n};\r\n\r\nexport const getUser = () => {\r\n    return VueCookies.get(\"user\");\r\n};\r\n\r\nexport const setToken = (token) => {\r\n    VueCookies.set(\"token\", token, 60 * 60 * 60);\r\n};\r\n\r\nexport const getToken = () => {\r\n    return VueCookies.get(\"token\");\r\n};\r\n\r\nexport const setId = (id) => {\r\n    VueCookies.set(\"id\", id, 60 * 60 * 60);\r\n};\r\n\r\nexport const getId = () => {\r\n    return VueCookies.get(\"id\");\r\n};","<template>\r\n  <div class=\"font-title mb-4\">学习集名称</div>\r\n  <div class=\"mb-4\">\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"8个字以内\"\r\n      class=\"input-style\"\r\n      maxlength=\"8\"\r\n      v-model=\"state.book.name\"\r\n    />\r\n  </div>\r\n  <div class=\"font-title mb-4\">推荐语</div>\r\n  <div class=\"mb-4\">\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"一句话推荐，15字以内\"\r\n      class=\"input-style\"\r\n      maxlength=\"15\"\r\n      v-model=\"state.book.recommend\"\r\n    />\r\n  </div>\r\n  <div class=\"font-title mb-4\">详细说明</div>\r\n  <div class=\"mb-6\">\r\n    <textarea class=\"input-style1\" v-model=\"state.book.describe\"></textarea>\r\n  </div>\r\n  <div class=\"font-title mb-4\">学习集图片</div>\r\n  <div class=\"mb-6 flex\" style=\"overflow: auto; width: 100%\">\r\n    <div\r\n      v-for=\"(item, i) of state.photo\"\r\n      :v-model=\"state.photo[i]\"\r\n      :key=\"i\"\r\n      @click=\"changephoto(i)\"\r\n      class=\"set-photo mr-4 relative\"\r\n    >\r\n      <img :src=\"item\" class=\"object-none object-left-bottom book-photo\" />\r\n      <img\r\n        src=\"../../assets/Iconsetphoto.png\"\r\n        alt=\"\"\r\n        :class=\"state.clickPhoto == i ? 'icon-setphoto' : 'hidden'\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <div class=\"font-title mb-4\">标签</div>\r\n  <div class=\"mb-6\" style=\"overflow: auto; width: 100%; display: flex\">\r\n    <input\r\n      style=\"min-width: 5rem; width: 5rem\"\r\n      type=\"text\"\r\n      v-for=\"(item, i) of state.book.tags\"\r\n      v-model=\"state.book.tags[i].value\"\r\n      :key=\"i\"\r\n      :readonly=\"item.readOnly\"\r\n      class=\"input-tage mb-2\"\r\n      @keyup.enter=\"inputRead(i)\"\r\n      @click.ctrl.left=\"clickDel(i)\"\r\n    />\r\n    <div class=\"add-tag\" @click=\"onAdd\">\r\n      <van-icon name=\"plus\" size=\"0.62rem\" />\r\n    </div>\r\n  </div>\r\n  <div class=\"font-title mb-4\">属性</div>\r\n  <div class=\"flex mb-8 flex-1 attributes\">\r\n    <div\r\n      :class=\"'button-style ' + (state.isFree ? 'hover' : '')\"\r\n      @click=\"changeIsFree\"\r\n    >\r\n      免费\r\n    </div>\r\n    <div\r\n      :class=\"'button-style ' + (!state.isFree ? 'hover' : '')\"\r\n      @click=\"changeIsFree\"\r\n    >\r\n      付费\r\n    </div>\r\n    <input\r\n      v-if=\"!state.isFree\"\r\n      type=\"number\"\r\n      placeholder=\"0.00\"\r\n      class=\"input-style2 flex-grow\"\r\n      v-model=\"state.book.price\"\r\n    />\r\n  </div>\r\n  <div class=\"px-4\">\r\n    <div class=\"button2 mb-10\" @click=\"createBook\">保存并创建学习集</div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { reactive } from \"vue\";\r\nimport { create } from \"@/api/api\";\r\nimport { Notify } from \"vant\";\r\n\r\nvar state = reactive({\r\n  isFree: true,\r\n  clickPhoto: 66,\r\n\r\n  book: {\r\n    name: \"\",\r\n    recommend: \"\",\r\n    describe: \"\",\r\n    price: \"\",\r\n    cover: \"\",\r\n    tags: [],\r\n  },\r\n  photo: [\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/1.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/2.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/3.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/4.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/5.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/6.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/7.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/8.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/9.jpeg\",\r\n    \"https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/10.jpeg\",\r\n  ],\r\n});\r\nconst changeIsFree = () => {\r\n  state.isFree = !state.isFree;\r\n};\r\n\r\nconst changephoto = (num) => {\r\n  state.clickPhoto = num;\r\n  state.book.cover = state.photo[num];\r\n};\r\n\r\nconst onAdd = () => {\r\n  state.book.tags.push({ value: \"\", readOnly: false });\r\n};\r\nconst inputRead = (i) => {\r\n  state.book.tags[i].readOnly = true;\r\n};\r\nconst clickDel = (i) => {\r\n  state.book.tags.splice(i, 1);\r\n};\r\n\r\nconst createBook = async () => {\r\n  try {\r\n    if (state.book.name) {\r\n      if (state.book.cover) {\r\n        let data = JSON.parse(JSON.stringify(state.book));\r\n        data.tags = data.tags.join(\",\");\r\n        data.price = parseFloat(data.price);\r\n        console.log(state.book);\r\n        await create(data);\r\n        window.location.replace(\"#/sudy?id=\");\r\n      } else {\r\n        Notify(\"请选择学习集图片\");\r\n      }\r\n    } else {\r\n      Notify(\"请输入学习集名称\");\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.font-title {\r\n  font-weight: 400;\r\n  font-size: 16px;\r\n  line-height: 22px;\r\n}\r\n.input-style {\r\n  width: 100%;\r\n  padding: 0.625rem 1rem;\r\n  background: rgba(125, 125, 125, 0.1);\r\n  border-radius: 1rem;\r\n  /* color: #a0a2a3; */\r\n}\r\n.input-style1 {\r\n  width: 100%;\r\n  min-height: 7.5rem;\r\n  padding: 0.625rem 1rem;\r\n  background: rgba(125, 125, 125, 0.1);\r\n  border-radius: 1rem;\r\n  /* color: #a0a2a3; */\r\n}\r\n.input-style2 {\r\n  /* width: 8.44rem; */\r\n  width: 100%;\r\n  /* height: 2.375rem; */\r\n  padding: 0.5rem 1rem;\r\n  background: rgba(125, 125, 125, 0.1);\r\n  border-radius: 1rem;\r\n  /* color: #a0a2a3; */\r\n}\r\n.set-photo {\r\n  height: 4rem;\r\n  width: 4rem;\r\n  min-width: 4rem;\r\n  min-height: 4rem;\r\n}\r\n\r\n.book-photo {\r\n  height: 4rem;\r\n  width: 4rem;\r\n  min-width: 4rem;\r\n  min-height: 4rem;\r\n  object-fit: cover;\r\n}\r\n\r\n.icon-setphoto {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n.tage-box {\r\n  word-wrap: break-word;\r\n  word-break: break-all;\r\n  overflow: hidden;\r\n}\r\n.button-style {\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n  font-size: 0.75rem;\r\n  line-height: 1.125rem;\r\n  text-align: center;\r\n  color: #8e8e93;\r\n  padding: 0.625rem 2rem;\r\n  margin-right: 0.5rem;\r\n  white-space: nowrap;\r\n}\r\n.input-tage {\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n  color: #8e8e93;\r\n  padding: 0.625rem 0.625rem;\r\n  margin-right: 0.5rem;\r\n  min-width: 2rem;\r\n}\r\n.button-style.hover {\r\n  color: white;\r\n  background-color: #12bfa2;\r\n}\r\n\r\n.add-tag {\r\n  min-width: 2rem;\r\n  height: 1.625rem;\r\n  background: #ffffff;\r\n  border-radius: 1rem;\r\n  text-align: center;\r\n  margin-top: 0.4rem;\r\n}\r\n.button1 {\r\n  width: 100%;\r\n  background: #cfece8;\r\n  border-radius: 1rem;\r\n  font-weight: 700;\r\n  font-size: 16px;\r\n  line-height: 18px;\r\n  text-align: center;\r\n  color: #12bfa2;\r\n  padding: 0.6875rem 0;\r\n}\r\n.button2 {\r\n  width: 100%;\r\n  background: #12bfa2;\r\n  border-radius: 1rem;\r\n  font-weight: 700;\r\n  font-size: 16px;\r\n  line-height: 18px;\r\n  text-align: center;\r\n  color: #ffffff;\r\n  padding: 0.6875rem 0;\r\n}\r\n.attributes {\r\n  height: 2.375rem;\r\n}\r\n</style>\r\n","import script from \"./SetInfor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SetInfor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SetInfor.vue?vue&type=style&index=0&id=02daa036&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\code\\\\xiangyu\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-02daa036\"]])\n\nexport default __exports__","import script from \"./CreateInfor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CreateInfor.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["axios","errorHandle","status","other","console","log","localStorage","removeItem","config","headers","Accept","token","getToken","Authorization","error","Promise","reject","response","authorization","setToken","resolve","data","message","login","statistics","money","recommend","infor","id","delBooks","price","params","users","cards","create","myBooks","collect","collectCard","cardInfor","cardChange","delCard","recent","createCard","myCreate","setUser","user","VueCookies","getUser","state","reactive","isFree","clickPhoto","book","name","describe","cover","tags","photo","changeIsFree","changephoto","num","onAdd","push","value","readOnly","inputRead","i","clickDel","splice","createBook","async","JSON","parse","stringify","join","parseFloat","window","location","replace","Notify","err","__exports__"],"sourceRoot":""}