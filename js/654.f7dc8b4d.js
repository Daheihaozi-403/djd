"use strict";(self["webpackChunkxiangyu"]=self["webpackChunkxiangyu"]||[]).push([[654],{5278:function(t,e,n){n.d(e,{hg:function(){return U},D8:function(){return A},_u:function(){return b},KM:function(){return v},jm:function(){return h},Ue:function(){return y},LH:function(){return _},lM:function(){return m},$B:function(){return j},mz:function(){return p},x4:function(){return c},CZ:function(){return l},z6:function(){return k},Aj:function(){return S},nt:function(){return g},h5:function(){return w},l8:function(){return d},hd:function(){return u},rC:function(){return f}});var o=n(6265),s=n.n(o),r=n(6163);s().defaults.baseURL="https://study-api.hanwenbo.top/";const i=(t,e)=>{switch(t){case 400:console.log("信息验证失败");break;case 401:console.log("认证失败");break;case 403:localStorage.removeItem("token"),console.log("token校验失败");break;case 404:console.log("请求资源不存在");break;default:console.log(e);break}};s().interceptors.request.use((function(t){t.headers={"Content-Type":"application/json",Accept:"application/json"};const e=(0,r.LP)();return e&&(t.headers.Authorization=e),t}),(function(t){return Promise.reject(t)})),s().interceptors.response.use((function(t){return t.headers.authorization&&(0,r.o4)(t.headers.authorization),200===t.status?Promise.resolve(t.data):Promise.reject(t)}),(function(t){const{response:e}=t;if(e)return i(e.status,e.data.message),Promise.reject(e.data);console.log("断了")}));var a=s();function c(){return a.get("/user/wechat/login-test")}function u(){return a.get("/study/statistics")}function l(){return a.get("/deal/statistics")}function d(){return a.get("/study/books/recommend")}function p(t){return a.get(`/study/books/${t}`)}function m(t){return a["delete"](`/study/books/${t}`)}function g(t){return a.get("/deal/money",{params:t})}function f(t){return a.get("/study/books/"+t+"/users")}function b(t,e){return a.get("/study/books/"+t+"/entries",{params:e})}function y(t){return a.post("/study/books",t)}function k(){return a.get("/study/books")}function v(t,e){return a.post("/study/books/"+t+"/collect",e)}function h(t,e){return a.post("/study/entries/"+t+"/collect",e)}function A(t){return a.get(`/study/entries/${t}`)}function U(t,e){return a.put(`/study/entries/${t}`,e)}function j(t){return a["delete"](`/study/entries/${t}`)}function w(){return a.get("/study/books/recent")}function _(t){return a.post("/study/entries",t)}function S(){return a.get("/study/books/create")}},6163:function(t,e,n){n.d(e,{LP:function(){return c},PR:function(){return i},av:function(){return r},o4:function(){return a}});var o=n(5269),s=n.n(o);const r=t=>{s().set("user",t,216e3)},i=()=>s().get("user"),a=t=>{s().set("token",t,216e3)},c=()=>s().get("token")},3654:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var o=n(3396),s=n(4870),r=n(9242),i=n(7139),a=n(1988),c=n(5278),u=n(2135);const l=t=>((0,o.dD)("data-v-02daa036"),t=t(),(0,o.Cn)(),t),d=l((()=>(0,o._)("div",{class:"font-title mb-4"},"学习集名称",-1))),p={class:"mb-4"},m=l((()=>(0,o._)("div",{class:"font-title mb-4"},"推荐语",-1))),g={class:"mb-4"},f=l((()=>(0,o._)("div",{class:"font-title mb-4"},"详细说明",-1))),b={class:"mb-6"},y=l((()=>(0,o._)("div",{class:"font-title mb-4"},"学习集图片",-1))),k={class:"mb-6 flex",style:{overflow:"auto",width:"100%"}},v=["v-model","onClick"],h=["src"],A=l((()=>(0,o._)("div",{class:"font-title mb-4"},"标签",-1))),U={class:"mb-6",style:{overflow:"auto",width:"100%",display:"flex"}},j=["onUpdate:modelValue","readonly","onKeyup","onClick"],w=l((()=>(0,o._)("div",{class:"font-title mb-4"},"属性",-1))),_={class:"flex mb-8 flex-1 attributes"};var S={__name:"SetInfor",setup(t){var e=(0,s.qj)({isFree:!0,clickPhoto:66,book:{name:"",recommend:"",describe:"",price:"",cover:"",tags:[]},photo:["https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/1.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/2.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/3.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/4.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/5.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/6.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/7.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/8.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/9.jpeg","https://duo-jian-dan.oss-cn-qingdao.aliyuncs.com/covers/10.jpeg"]});const n=()=>{e.isFree=!e.isFree},l=t=>{e.clickPhoto=t,e.book.cover=e.photo[t]},S=()=>{e.book.tags.push({value:"",readOnly:!1})},C=t=>{e.book.tags[t].readOnly=!0},x=t=>{e.book.tags.splice(t,1)},P=async()=>{try{if(e.book.name)if(e.book.cover){let t=JSON.parse(JSON.stringify(e.book));t.tags=t.tags.join(","),t.price=parseFloat(t.price),console.log(e.book),await(0,c.Ue)(t),window.location.replace("#/sudy?id=")}else(0,u.g)("请选择学习集图片");else(0,u.g)("请输入学习集名称")}catch(t){console.log(t)}};return(t,c)=>{const u=(0,o.up)("van-icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[d,(0,o._)("div",p,[(0,o.wy)((0,o._)("input",{type:"text",placeholder:"8个字以内",class:"input-style",maxlength:"8","onUpdate:modelValue":c[0]||(c[0]=t=>(0,s.SU)(e).book.name=t)},null,512),[[r.nr,(0,s.SU)(e).book.name]])]),m,(0,o._)("div",g,[(0,o.wy)((0,o._)("input",{type:"text",placeholder:"一句话推荐，15字以内",class:"input-style",maxlength:"15","onUpdate:modelValue":c[1]||(c[1]=t=>(0,s.SU)(e).book.recommend=t)},null,512),[[r.nr,(0,s.SU)(e).book.recommend]])]),f,(0,o._)("div",b,[(0,o.wy)((0,o._)("textarea",{class:"input-style1","onUpdate:modelValue":c[2]||(c[2]=t=>(0,s.SU)(e).book.describe=t)},null,512),[[r.nr,(0,s.SU)(e).book.describe]])]),y,(0,o._)("div",k,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(e).photo,((t,n)=>((0,o.wg)(),(0,o.iD)("div",{"v-model":(0,s.SU)(e).photo[n],key:n,onClick:t=>l(n),class:"set-photo mr-4 relative"},[(0,o._)("img",{src:t,class:"object-none object-left-bottom book-photo"},null,8,h),(0,o._)("img",{src:a,alt:"",class:(0,i.C_)((0,s.SU)(e).clickPhoto==n?"icon-setphoto":"hidden")},null,2)],8,v)))),128))]),A,(0,o._)("div",U,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(e).book.tags,((t,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{style:{"min-width":"5rem",width:"5rem"},type:"text","onUpdate:modelValue":t=>(0,s.SU)(e).book.tags[n].value=t,key:n,readonly:t.readOnly,class:"input-tage mb-2",onKeyup:(0,r.D2)((t=>C(n)),["enter"]),onClick:(0,r.iM)((t=>x(n)),["ctrl","left"])},null,40,j)),[[r.nr,(0,s.SU)(e).book.tags[n].value]]))),128)),(0,o._)("div",{class:"add-tag",onClick:S},[(0,o.Wm)(u,{name:"plus",size:"0.62rem"})])]),w,(0,o._)("div",_,[(0,o._)("div",{class:(0,i.C_)("button-style "+((0,s.SU)(e).isFree?"hover":"")),onClick:n}," 免费 ",2),(0,o._)("div",{class:(0,i.C_)("button-style "+((0,s.SU)(e).isFree?"":"hover")),onClick:n}," 付费 ",2),(0,s.SU)(e).isFree?(0,o.kq)("",!0):(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:0,type:"number",placeholder:"0.00",class:"input-style2 flex-grow","onUpdate:modelValue":c[3]||(c[3]=t=>(0,s.SU)(e).book.price=t)},null,512)),[[r.nr,(0,s.SU)(e).book.price]])]),(0,o._)("div",{class:"px-4"},[(0,o._)("div",{class:"button2 mb-10",onClick:P},"保存并创建学习集")])],64)}}},C=n(89);const x=(0,C.Z)(S,[["__scopeId","data-v-02daa036"]]);var P=x;const q=(0,o._)("div",{class:"text-normal font-semibold text-center mt-4 mb-7"},"创建学习集1",-1),I={class:"mx-6"};var O={__name:"CreateInfor",setup(t){return(t,e)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[q,(0,o._)("div",I,[(0,o.Wm)((0,s.SU)(P))])],64))}};const V=O;var B=V},1988:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEwSURBVHgBnZNNTsJQEMdnhiYu3HABk7rX2IUHoOwNhBt4A29gvYE9ATcwujah7t2Q6N4mXIANiSbyhpnpBw8IpfBLXjqdvv989M1D2KL7Pu5R0BmIOZQVFl6cAvDUwfJpHt/n/n6shdm4S9B5FPMBmnkuA83rAIU4yCRLBK1AqeY/1iCkr0XmtmKFo7JaQMkeyssPnIC0ElMVqYmLs3P4vL2z5UOOhtICRofEL9d9e+5AOAi2e6+yjL4n8glq8exvUfg2CYO9Wa/6tV2JZ7+L3SJk5b5j9DUxgQoPiVmGi8Dxm+80QRmkSaygzIMeY09OIoMTkGO8JJmmD6kihaPhVO+FTaIjl2g/raV2sVyitgXQmWZwcbtKONW9G5fJx0abKWGkG1zPSK4/Wyp9tZY9Vs3QlL+tSYPaAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=654.f7dc8b4d.js.map